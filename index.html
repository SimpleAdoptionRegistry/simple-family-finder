<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Family Finder</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        async function submitPost(event) {
            event.preventDefault();

            const postData = {
                birthName: document.getElementById('birthName').value,
                adoptedName: document.getElementById('adoptedName').value,
                dob: document.getElementById('dob').value,
                location: document.getElementById('location').value,
                agency: document.getElementById('agency').value,
                contact: document.getElementById('contact').value,
                comments: document.getElementById('comments').value,
            };

            // Send POST request to your backend (update the URL accordingly)
            await fetch('http://localhost:3000/posts', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(postData),
            });

            // Clear the form
            document.getElementById('postForm').reset();

            // Fetch and display posts
            fetchPosts();
        }

        async function fetchPosts() {
            const response = await fetch('http://localhost:3000/posts');
            const posts = await response.json();

            // Display posts
            const postsContainer = document.getElementById('posts');
            postsContainer.innerHTML = ''; // Clear existing posts
            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.classList.add('post');
                postElement.innerHTML = `
                    <h3>Birth Name: ${post.birthName} | Adopted Name: ${post.adoptedName}</h3>
                    <p><strong>Date of Birth:</strong> ${post.dob}</p>
                    <p><strong>Last Known Location:</strong> ${post.location}</p>
                    <p><strong>Adoption Agency:</strong> ${post.agency}</p>
                    <p><strong>Contact Information:</strong> ${post.contact}</p>
                    <p><strong>Additional Comments:</strong> ${post.comments}</p>
                    <hr>
                `;
                postsContainer.appendChild(postElement);
            });
        }

        // Fetch posts on page load
        window.onload = fetchPosts;
    </script>
</head>
<body>
    <header>
        <h1>Welcome to Simple Family Finder</h1>
    </header>
    <section id="post">
        <h2>Post Your Information</h2>
        <form id="postForm" onsubmit="submitPost(event)">
            <label>Birth Name:</label>
            <input type="text" id="birthName">
            <label>Adopted Name:</label>
            <input type="text" id="adoptedName">
            <label>Date of Birth:</label>
            <input type="date" id="dob">
            <label>Last Known Location:</label>
            <input type="text" id="location">
            <label>Adoption Agency (if applicable):</label>
            <input type="text" id="agency">
            <label>Contact Information (optional):</label>
            <input type="text" id="contact">
            <label>Additional Comments:</label>
            <textarea id="comments" rows="4"></textarea>
            <input type="submit" value="Submit">
        </form>
        <div id="posts" style="margin-top: 20px;"></div>
    </section>
</body>
</html>
